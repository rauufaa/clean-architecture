apiVersion: v1
kind: Pod
metadata:
  name: bun-pod-polisportiva
spec:
  containers:
    - name: postgres
      image: postgres:bun-1.0
      env:
        - name: POSTGRES_USER
          value: admin
        - name: POSTGRES_PASSWORD
          value: secret
        - name: POSTGRES_DB
          value: polisportiva
      resources:
        limits: 
          cpu: "2"
          memory: "2Gi"
        requests: 
          cpu: "2"
          memory: "2Gi"

    - name: fastify-app
      image: bun:bun-1.0
      env:
        - name: APP_IP
          value: 0.0.0.0
        - name: APP_PORT
          value: 3000
        - name: POSTGRES_URL
          value: postgresql://admin:secret@localhost:5432/polisportiva?schema=public
        - name: JWT_SECRET
          value: wFJfi7FB9fjhhibD98id9B3IIB3
        - name: JWT_EXP_DURATION
          value: 1h
      resources:
        limits: 
          cpu: "2"
          memory: "2Gi"
        requests: 
          cpu: "2"
          memory: "2Gi"
      ports:
        - containerPort: 3000
          hostPort: 3000

    # - name: haproxy
    #   image: haproxy:bun-1.0
    #   ports:
    #     - containerPort: 80
    #       hostPort: 80
    #     - containerPort: 443
    #       hostPort: 443
